"use strict";(self.webpackChunk_uniswap_interface=self.webpackChunk_uniswap_interface||[]).push([[7436],{86459:(e,n,i)=>{i.r(n),i.d(n,{default:()=>s});const s={}},47436:(e,n,i)=>{i.r(n),i.d(n,{default:()=>A});var s=i(84250),t=i(4370),r=i(73180),a=i(66112),o=i(39891),l=i(79961),d=i(20449),c=i(74441),x=i(78307),p=i(18670),u=i(94033),g=i(79267),_=i(59922);var f=i(30195);const h=f.z.object({});const y=h.extend({type:f.z.literal("PasskeyRequest"),requestId:f.z.string(),challengeJson:f.z.string()});var m=(e=>(e.PasskeySignInFlowOpened="PasskeySignInFlowOpened",e.PasskeyCredentialRetrieved="PasskeyCredentialRetrieved",e.PasskeyCredentialError="PasskeyCredentialError",e))(m||{});h.extend({type:f.z.literal("PasskeySignInFlowOpened"),requestId:f.z.string()}),h.extend({type:f.z.literal("PasskeyCredentialRetrieved"),requestId:f.z.string(),credential:f.z.string()}),h.extend({type:f.z.literal("PasskeyCredentialError"),requestId:f.z.string(),error:f.z.string()});var v=i(92868),k=i(2637),I=i(96102),b=i(21605),S=i(47554);function P(e,n,i,s,t,r,a){try{var o=e[r](a),l=o.value}catch(d){return void i(d)}o.done?n(l):Promise.resolve(l).then(s,t)}function j(e){return function(){var n=this,i=arguments;return new Promise((function(s,t){var r=e.apply(n,i);function a(e){P(r,s,t,a,o,"next",e)}function o(e){P(r,s,t,a,o,"throw",e)}a(void 0)}))}}const z="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _pt-t-space-spa1360334076 _pb-t-space-spa1360334076 ",w="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center _pr-t-space-spa1360333927 _pl-t-space-spa1360333927 ",E="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center ",D="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _width-fit-content ",C="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _flexDirection-row _justifyContent-flex-end ",q="  _display-flex _alignItems-stretch _flexBasis-auto _boxSizing-border-box _position-relative _minHeight-0px _minWidth-0px _flexShrink-0 _width-400px _pt-t-space-spa1360334076 _pr-t-space-spa1360334076 _pb-t-space-spa1360334076 _pl-t-space-spa1360334076 _flexDirection-column _gap-t-space-spa1360334076 ",N="  _display-flex _flexBasis-auto _boxSizing-border-box _position-relative _minWidth-0px _flexShrink-0 _flexDirection-column _alignItems-center _justifyContent-center _minHeight-100vh ",R=3*b.Yb;function A(){const{t:e}=(0,o.$G)(),n=(0,r.M)(),[i,f]=(0,a.useState)("Verifying"),[h,b]=(0,a.useState)(null),[P]=(0,l.lr)();(0,a.useEffect)((()=>{var e;if(!(null===(e=chrome)||void 0===e?void 0:e.runtime))return I.k.debug("ExtensionPasskeySignIn.tsx","useEffect","No `chrome.runtime` found"),void f("Denied");const i=P.get("request_id");if(!i)return I.k.debug("ExtensionPasskeySignIn.tsx","useEffect","No `request_id` found"),void f("Denied");const s=function(){var e=j((function*(e){const n=function(e,n){try{return n.parse(e)}catch(i){return}}(e,y);n?(I.k.debug("ExtensionPasskeySignIn.tsx","handleMessageRequestPasskey",`Message received: ${n.type}`),f("Allowed"),b(n)):f("Denied")}));return function(n){return e.apply(this,arguments)}}();I.k.debug("ExtensionPasskeySignIn.tsx","useEffect",`Sending PasskeySignInFlowOpened message to extension ID ${n}`),chrome.runtime.sendMessage(n,{type:m.PasskeySignInFlowOpened,requestId:i},s)}),[]);const A=function(){var e=j((function*(){if("Allowed"===i&&h)try{const e=yield(0,v.s)(h.challengeJson);if(!e)return I.k.debug("ExtensionPasskeySignIn.tsx","onPressSignIn",`Sending PasskeyCredentialError message to extension ID ${n}`),void chrome.runtime.sendMessage(n,{type:m.PasskeyCredentialError,requestId:h.requestId,error:"No credential returned"});I.k.debug("ExtensionPasskeySignIn.tsx","onPressSignIn",`Sending PasskeyCredentialRetrieved message to extension ID ${n}`),chrome.runtime.sendMessage(n,{type:m.PasskeyCredentialRetrieved,requestId:h.requestId,credential:e})}catch(e){I.k.error(e,{tags:{file:"ExtensionPasskeySignIn/index.tsx",function:"onPressSignIn"}})}else I.k.debug("ExtensionPasskeySignIn.tsx","onPressSignIn","Invalid state",{signInAttemptStatus:i,passkeyRequestData:h})}));return function(){return e.apply(this,arguments)}}();return(0,S.KS)((()=>{f((e=>"Verifying"===e?"Denied":e))}),R),(0,s.jsx)(k.Z,{logImpression:!0,page:"extension-passkey-sign-in-page",children:(0,s.jsx)("div",{className:N,children:(0,s.jsxs)("div",{className:q,children:[(0,s.jsx)("div",{className:C,children:(0,s.jsx)("div",{className:D,children:(0,s.jsx)(d.e,{target:"_blank",rel:"noreferrer",href:_.RJ.helpArticleUrls.passkeysInfo,children:(0,s.jsx)(c.z,{icon:(0,s.jsx)(t.T,{}),size:"xxsmall",emphasis:"secondary",children:e("common.getHelp.button")})})})}),(0,s.jsx)("div",{className:E,children:(0,s.jsx)(g.T,{size:"$icon.40",color:"$accent1"})}),"Denied"===i?(0,s.jsx)("div",{className:w,children:(0,s.jsx)(x.xv,{variant:"body3",textAlign:"center",children:e("extensionPasskeySignInPopUp.invalidReferrer")})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:E,children:(0,s.jsx)(x.xv,{variant:"subheading1",children:e("nav.signIn.button")})}),(0,s.jsx)("div",{className:w,children:(0,s.jsx)(x.xv,{variant:"body3",textAlign:"center",children:e("extensionPasskeySignInPopUp.description")})}),(0,s.jsx)("div",{className:z,children:(0,s.jsx)(c.z,{icon:"Verifying"===i?(0,s.jsx)(p.n,{}):(0,s.jsx)(u.V,{}),size:"large",variant:"branded",onPress:A,isDisabled:"Allowed"!==i,children:"Allowed"===i?e("nav.signIn.button"):void 0})})]})]})})})}i(86459)},73180:(e,n,i)=>{i.d(n,{M:()=>a});var s=i(32441),t=i(28734),r=i(36152);function a(){return(0,t.yG)(s.Rx.ExternallyConnectableExtension,s.TM.ExtensionId,r.J.prod)}}}]);
//# sourceMappingURL=7436.54ad8926.chunk.js.map